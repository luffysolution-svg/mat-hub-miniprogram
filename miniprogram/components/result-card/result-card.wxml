<view class="result-card" bindtap="onTap">
  <view class="card-header">
    <view class="card-tags">
      <text class="tag tag-{{item.type}}">{{item.type === 'material' ? 'Material' : 'Literature'}}</text>
      <text class="tag tag-source" wx:if="{{showSource}}">{{sourceShort}}</text>
      <text class="tag tag-success" wx:if="{{item.has_pdf}}">PDF</text>
    </view>
    <view class="favorite-btn" catchtap="onFavorite">
      <text class="favorite-icon-text">{{isFavorite ? '★' : '☆'}}</text>
    </view>
  </view>

  <text class="card-title">{{item.title}}</text>

  <view class="card-meta" wx:if="{{formattedAuthors || item.journal || item.year}}">
    <text class="meta-authors" wx:if="{{formattedAuthors}}">{{formattedAuthors}}</text>
    <text class="meta-divider" wx:if="{{formattedAuthors && (item.journal || item.year)}}">·</text>
    <text class="meta-journal" wx:if="{{item.journal}}">{{item.journal}}</text>
    <text class="meta-year" wx:if="{{item.year}}">({{item.year}})</text>
  </view>

  <text class="card-abstract" wx:if="{{item.abstract_snippet}}">{{item.abstract_snippet}}</text>

  <!-- Material Properties -->
  <view class="card-properties" wx:if="{{item.type === 'material' && item.properties}}">
    <view class="property-item" wx:if="{{item.properties.band_gap != null}}">
      <text class="property-label">Band Gap</text>
      <text class="property-value">{{item.properties.band_gap}} eV</text>
    </view>
    <view class="property-item" wx:if="{{item.properties.density != null}}">
      <text class="property-label">Density</text>
      <text class="property-value">{{item.properties.density}} g/cm³</text>
    </view>
    <view class="property-item" wx:if="{{item.properties.crystal_system}}">
      <text class="property-label">Crystal</text>
      <text class="property-value">{{item.properties.crystal_system}}</text>
    </view>
  </view>

  <view class="card-footer" wx:if="{{item.doi}}">
    <text class="doi-text">DOI: {{item.doi}}</text>
  </view>
</view>
