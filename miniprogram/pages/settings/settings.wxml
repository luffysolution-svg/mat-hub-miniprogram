<view class="container">
  <!-- Data Sources -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">Data Sources</text>
      <text class="section-action" bindtap="enableAllSources">Enable All</text>
    </view>

    <view class="card">
      <text class="subsection-title">Materials</text>
      <view class="source-list">
        <view
          class="source-item"
          wx:for="{{materialSources}}"
          wx:key="id"
          data-source="{{item.id}}"
          bindtap="onSourceToggle"
        >
          <view class="source-info">
            <text class="source-name">{{item.name}}</text>
            <text class="source-id">{{item.short}}</text>
          </view>
          <view class="toggle {{enabledSources[item.id] ? 'on' : ''}}">
            <view class="toggle-handle"></view>
          </view>
        </view>
      </view>

      <view class="divider"></view>

      <text class="subsection-title">Literature</text>
      <view class="source-list">
        <view
          class="source-item"
          wx:for="{{literatureSources}}"
          wx:key="id"
          data-source="{{item.id}}"
          bindtap="onSourceToggle"
        >
          <view class="source-info">
            <text class="source-name">{{item.name}}</text>
            <text class="source-id">{{item.short}}</text>
          </view>
          <view class="toggle {{enabledSources[item.id] ? 'on' : ''}}">
            <view class="toggle-handle"></view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- Storage -->
  <view class="section">
    <text class="section-title">Storage</text>
    <view class="card">
      <view class="info-row">
        <text class="info-label">Cache Size</text>
        <text class="info-value">{{cacheSize}}</text>
      </view>
      <view class="info-row">
        <text class="info-label">History Items</text>
        <text class="info-value">{{historyCount}}</text>
      </view>
      <view class="info-row">
        <text class="info-label">Favorites</text>
        <text class="info-value">{{favoritesCount}}</text>
      </view>
      <view class="divider"></view>
      <view class="action-row" bindtap="clearCache">
        <text class="action-label">Clear Cache</text>
        <text class="arrow-text">›</text>
      </view>
      <view class="action-row danger" bindtap="clearAll">
        <text class="action-label">Clear All Data</text>
        <text class="arrow-text">›</text>
      </view>
    </view>
  </view>

  <!-- API Status -->
  <view class="section">
    <text class="section-title">Connection</text>
    <view class="card">
      <view class="info-row" bindtap="copyApiUrl">
        <text class="info-label">API Server</text>
        <text class="info-value small">{{apiStatus === 'online' ? 'Connected' : (apiStatus === 'offline' ? 'Offline' : 'Checking...')}}</text>
        <view class="status-dot {{apiStatus}}"></view>
      </view>
      <view class="action-row" bindtap="checkApiStatus">
        <text class="action-label">Check Connection</text>
        <text class="arrow-text">›</text>
      </view>
    </view>
  </view>

  <!-- About -->
  <view class="section">
    <text class="section-title">About</text>
    <view class="card">
      <view class="info-row">
        <text class="info-label">Version</text>
        <text class="info-value">{{version}}</text>
      </view>
      <view class="action-row" bindtap="showAbout">
        <text class="action-label">About Mat-Hub</text>
        <text class="arrow-text">›</text>
      </view>
    </view>
  </view>
</view>
